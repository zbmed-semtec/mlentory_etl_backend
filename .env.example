# MLentory ETL Backend - Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# Core Settings
# =============================================================================
PROJECT_NAME=mlentory-etl
ENVIRONMENT=development
LOG_LEVEL=INFO
DATA_DIR=/data

# =============================================================================
# Neo4j Configuration
# =============================================================================
NEO4J_URI=bolt://mlentory-neo4j:7687
NEO4J_AUTH=neo4j/mlentory_neo4j_password_change_me
NEO4J_USER=neo4j
NEO4J_PASSWORD=mlentory_neo4j_password_change_me

NEO4J_ACCEPT_LICENSE_AGREEMENT=yes
NEO4J_apoc_export_file_enabled=true
NEO4J_apoc_import_file_enabled=true
NEO4J_apoc_import_file_use__neo4j__config=true
NEO4J_dbms_security_procedures_unrestricted=apoc.*,algo.*
NEO4J_server_config_strict__validation_enabled=false


# Neo4j Browser (optional, for local development)
NEO4J_BROWSER_PORT=7474
NEO4J_BOLT_PORT=7687

N10S_RESET_ON_CONFIG_CHANGE=false

# =============================================================================
# Elasticsearch Configuration
# =============================================================================
ELASTIC_URL=http://mlentory-elasticsearch:9201
ELASTIC_HOST=mlentory-elasticsearch
ELASTIC_PORT=9200
ELASTIC_SCHEME=http
ELASTIC_VERSION=8.18.2
ELASTIC_SECURITY=true
ELASTIC_USER=elastic
ELASTIC_PASSWORD=changeme

# Elasticsearch memory settings (adjust based on your system)
ES_JAVA_OPTS=-Xms512m -Xmx512m

# =============================================================================
# Dagster Configuration
# =============================================================================
DAGSTER_HOME=/opt/dagster/dagster_home
DAGSTER_PORT=3000
DAGSTER_POSTGRES_USER=dagster
DAGSTER_POSTGRES_PASSWORD=dagster_password_change_me
DAGSTER_POSTGRES_DB=dagster

# =============================================================================
# Python & Poetry Configuration
# =============================================================================
PYTHON_VERSION=3.11
POETRY_VERSION=1.7.1

# =============================================================================
# Extractor Configuration
# =============================================================================

# HuggingFace
HUGGINGFACE_API_TOKEN=
HUGGINGFACE_RATE_LIMIT=100
HUGGINGFACE_MAX_MODELS=1000

# PapersWithCode
PAPERSWITHCODE_API_TOKEN=
PAPERSWITHCODE_RATE_LIMIT=60

# OpenML
OPENML_API_KEY=
OPENML_CACHE_DIR=/data/cache/openml

# =============================================================================
# Data Storage Paths
# =============================================================================
RAW_DATA_PATH=/data/raw
NORMALIZED_DATA_PATH=/data/normalized
RDF_DATA_PATH=/data/rdf
CACHE_PATH=/data/cache

# =============================================================================
# Loader Configuration
# =============================================================================

# Batch sizes for loading
NEO4J_BATCH_SIZE=1000
ELASTICSEARCH_BATCH_SIZE=500

# Retry settings
MAX_RETRIES=3
RETRY_DELAY=5

# =============================================================================
# Git Tracking (for reproducibility)
# =============================================================================
GIT_COMMIT=
GIT_BRANCH=

# =============================================================================
# Development & Testing
# =============================================================================

# Set to 'true' to enable debug mode
DEBUG=false

# Test database settings (for integration tests)
TEST_NEO4J_URI=bolt://neo4j-test:7687
TEST_ELASTICSEARCH_URL=http://elasticsearch-test:9200

# =============================================================================
# Security & Secrets
# =============================================================================

# JWT secret for API authentication (if needed in future)
JWT_SECRET=change_me_to_random_string

# API rate limiting
API_RATE_LIMIT=1000

# =============================================================================
# Monitoring & Observability (future use)
# =============================================================================
ENABLE_METRICS=false
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001

# =============================================================================
# Docker Configuration
# =============================================================================
COMPOSE_PROJECT_NAME=mlentory-etl
DOCKER_BUILDKIT=1
